{% extends "layouts.html" %}

{% block styles %}
    <link href="../static/index.css" rel="stylesheet">
{% endblock %}

{% block title %}
    Search Results
{% endblock %}

{% block main %}
    <div class="search_results">
        {% for id, books in library.items() %}
            <div class="shelf" data-id="{{ id }}">
                <h2>{{ id }}</h2>
                <div class="books_shelf">
                    {% for book in books %}
                        <div class="book" data-color="{{ book.color }}" data-pages="{{ book.pages }}">
                            {% if book.title is not none %}
                                <p class="book_title">{{ book.title }}</p>

                                <form action="/remove_book" method="post" class="remove_book_form">
                                    <input name="book_id" type="hidden" value="{{ book.book_id }}">
                                    <button type="submit"><i class="fa-solid fa-trash"></i></button>
                                </form>
                                <div class="edit_book_form">
                                    <button class="hidden_button"><i class="fa-solid fa-pen-to-square"></i></button>
                                    <form action="/edit_book" method="post" class="edit_book hidden">
                                        <p>Edit Book</p>
                                        <input name="book_id" type="hidden" value="{{ book.book_id }}">
                                        <label for="book_title_{{ book_id }}">Book Title</label>
                                        <input autofill="off" id="book_title_{{ book_id }}" name="book_title" placeholder="Title" type="text">
                                        <label for="book_author">Author</label>
                                        <input autofill="off" name="book_author" placeholder="Author" type="text">
                                        <label for="pages">Number of Pages</label>
                                        <input autofill="off" name="pages" placeholder="Pages" type="number">
                                        <label for="color">Color</label>
                                        <input class="form-control form-control-color" name="color" title="Choose your color" type="color" value="#563d7c">
                                        <label for="publisher">Publishing House</label>
                                        <input autofill="off" name="publisher" placeholder="Publisher" type="text">
                                        <label for="published_date">Published Date</label>
                                        <input autofill="off" name="published_date" placeholder="Published Date" type="date">
                                        <p>Fiction or Non-Fiction</p>
                                        <input id="fiction" name="fiction_nonfiction" type="radio" value="1">
                                        <label for="fiction">Fiction</label>
                                        <input id="nonfiction" name="fiction_nonfiction" type="radio" value="0">
                                        <label for="nonfiction">Non-Fiction</label>
                                        <label for="genre">Genre</label>
                                        <input autofill="off"name="genre" placeholder="Genre" type="text">
                                        <p>Read or Not Read</p>
                                        <input id="read" name="read_not_read" type="radio" value="1">
                                        <label for="read">Read</label>
                                        <input id="not_read" name="read_not_read" type="radio" value="0">
                                        <label id="not_read">Not Read</label>
                                        <label for="isbn">ISBN</label>
                                        <input autofill="off" name="isbn" placeholder="ISBN" type="number">
                                        <button type="submit">Add Book</button>
                                    </form>
                                </div>
                            {% endif %}
                        </div>
                        <div class="hidden_book_fields">
                            {% if book.author is not none %}
                                <p class="book_author">Author: {{ book.author }}</p>
                            {% endif %}
                            {% if book.color is not none %}
                                <p class="book_color">Hex Color: {{ book.color }}</p>
                            {% endif %}
                            {% if book.color_name is not none %}
                                <p class="book_color_name">Color Name: {{ book.color_name }}</p>
                            {% endif %}
                            {% if book.publisher is not none %}
                                <p class="book_publisher">Publisher: {{ book.publisher }}</p>
                            {% endif %}
                            {% if book.fiction_nonfiction is not none %}
                                <p class="book_fiction_nonfiction">{{ book.fiction_nonfiction }}</p>
                            {% endif %}
                            {% if book.genre is not none %}
                                <p class="book_genre">Genre: {{ book.genre }}</p>
                            {% endif %} 
                            {% if book.read is not none %}
                                <p class="book_read">{{ book.read }}</p>
                            {% endif %}
                            {% if book.pages is not none %}
                                <p class="book_pages">Pages: {{ book.pages }}</p>
                            {% endif %}
                            {% if book.isbn is not none %}
                                <p class="book_isbn">ISBN: {{ book.isbn }}</p>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}

{% block script %}
    <script src="../static/show_forms.js"></script>
    <script src="../static/change_book_color.js"></script>
    <script src="../static/change_text_based_background.js"></script>
{% endblock %}